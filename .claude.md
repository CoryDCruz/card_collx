# Card Collection Tracker - Project Context

## Project Overview

A mobile-first web application for tracking and managing sports card collections. Users can scan cards using their iPhone camera, catalog them, and use AI agents to discover average market prices.

## Goals

1. **Card Scanning**: Use phone camera to capture card images
2. **Cataloging**: Store and organize card collection with metadata
3. **AI Price Discovery**: Use AI agents to find average sell prices from multiple sources
4. **Mobile Experience**: iPhone-optimized with PWA support (future)

## Tech Stack

### Backend
- **FastAPI** - Python web framework
- **SQLAlchemy** - ORM for database operations
- **Pydantic** - Data validation and settings
- **SQLite** - Database (can upgrade to PostgreSQL)
- **Python 3.8+**

### Frontend
- **React** - UI framework
- **TypeScript** - Type safety
- **Vite** - Build tool and dev server
- **Axios** - HTTP client
- **Node.js 20+**

### Future Integrations
- **OpenAI Vision API** or **Google Cloud Vision** - Card image recognition
- **LangChain/CrewAI** - AI agents for price discovery
- **Anthropic Claude API** - AI agent intelligence

## Project Structure

```
card_collx/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/          # API routes and endpoints
â”‚   â”‚   â”‚   â””â”€â”€ routes.py # Card CRUD, scan, price endpoints
â”‚   â”‚   â”œâ”€â”€ core/         # Configuration and settings
â”‚   â”‚   â”‚   â””â”€â”€ config.py # App settings, CORS, env vars
â”‚   â”‚   â”œâ”€â”€ models/       # Data models
â”‚   â”‚   â”‚   â””â”€â”€ card.py   # Card, CardCreate, CardPrice models
â”‚   â”‚   â”œâ”€â”€ services/     # Business logic (future)
â”‚   â”‚   â””â”€â”€ db/           # Database setup (future)
â”‚   â”œâ”€â”€ requirements.txt  # Python dependencies
â”‚   â””â”€â”€ .env.example      # Environment variables template
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/   # React components
â”‚   â”‚   â”‚   â””â”€â”€ CardScanner.tsx  # Camera/file upload component
â”‚   â”‚   â”œâ”€â”€ pages/        # Page components
â”‚   â”‚   â”‚   â””â”€â”€ Home.tsx  # Main home page
â”‚   â”‚   â”œâ”€â”€ services/     # API client
â”‚   â”‚   â”‚   â””â”€â”€ api.ts    # Axios-based API service
â”‚   â”‚   â””â”€â”€ types/        # TypeScript types
â”‚   â”‚       â””â”€â”€ card.ts   # Card-related types
â”‚   â””â”€â”€ .env.example      # Frontend env template
â””â”€â”€ .claude.md           # This file - project context
```

## Current Implementation Status

### âœ… Completed
- [x] Initial project structure created
- [x] FastAPI backend skeleton with placeholder routes
- [x] React + TypeScript frontend with Vite
- [x] Card data models (Pydantic)
- [x] API routes for cards (GET, POST, scan, price)
- [x] CardScanner component with camera/file upload
- [x] API service layer with Axios
- [x] TypeScript types matching backend models
- [x] Git repository initialized
- [x] Code pushed to GitHub: https://github.com/CoryDCruz/card_collx

### ðŸš§ Not Yet Implemented
- [ ] Database models and migrations (SQLAlchemy)
- [ ] Actual image processing and storage
- [ ] Card recognition/OCR functionality
- [ ] AI agent for price discovery
- [ ] User authentication
- [ ] PWA features (offline support, installable)
- [ ] Card search and filtering
- [ ] Price history tracking

## API Endpoints

Current endpoints (placeholders, need implementation):

- `GET /` - API info
- `GET /health` - Health check
- `GET /api/cards` - Get all cards
- `POST /api/cards` - Create a card manually
- `POST /api/cards/scan` - Upload and scan a card image
- `GET /api/cards/{id}` - Get a specific card
- `GET /api/cards/{id}/price` - Get price info for a card

## Data Models

### Card
```python
{
  "id": int,
  "player_name": str,
  "year": Optional[int],
  "brand": Optional[str],
  "card_number": Optional[str],
  "set_name": Optional[str],
  "sport": Optional[str],
  "condition": Optional[str],
  "notes": Optional[str],
  "image_url": Optional[str],
  "created_at": datetime,
  "updated_at": datetime
}
```

## Development Setup

### Backend
```bash
cd backend
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate
pip install -r requirements.txt
cp .env.example .env
uvicorn app.main:app --reload
```
API available at: http://localhost:8000
Docs at: http://localhost:8000/docs

### Frontend
```bash
cd frontend
npm install
cp .env.example .env
npm run dev
```
App available at: http://localhost:5173

## Environment Variables

### Backend (.env)
- `DATABASE_URL` - Database connection string
- `UPLOAD_DIR` - Directory for uploaded images
- `OPENAI_API_KEY` - For image recognition (future)
- `ALLOWED_ORIGINS` - CORS origins

### Frontend (.env)
- `VITE_API_URL` - Backend API URL (default: http://localhost:8000/api)

## Next Steps Priority

1. **Database Setup** - Implement SQLAlchemy models and database initialization
2. **Image Storage** - Set up file upload handling and storage
3. **Card Recognition** - Integrate OCR or vision API for card identification
4. **AI Price Agent** - Build LangChain/CrewAI agent for price discovery
5. **PWA Features** - Add service worker and manifest for mobile app experience

## Important Notes

- **Mobile-First**: All UI should work well on iPhone Safari
- **Camera Access**: Use `capture="environment"` for rear camera on mobile
- **CORS**: Already configured for localhost:5173 and localhost:3000
- **Git**: Repository at https://github.com/CoryDCruz/card_collx
- **Node Version**: Current 20.12.1 (works but shows warnings, consider upgrading to 20.19+)

## Conventions

- Backend uses snake_case for Python
- Frontend uses camelCase for TypeScript/JavaScript
- All API responses use snake_case (matches backend)
- Type definitions mirror backend Pydantic models
- Use async/await for all API calls
- TODOs marked in code for future implementation

---

**Last Updated**: Initial setup - 2025-12-04
**Status**: Foundation complete, ready for feature implementation
